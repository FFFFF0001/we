function reloadPage(e){var t=e.location;t.href=t.pathname+t.search}function redirect(e){location.href=e}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function setCookie(e,t,a){var n=setCookie.arguments.length,i=setCookie.arguments,o=n>5?i[5]:!1,r=new Date;null!=a&&0!=a||(a=1),r.setTime(r.getTime()+864e5*a),document.cookie=e+"="+escape(t)+"; path=/"+(1==o?"; secure":"")+";expires="+r.toGMTString()}function open_iframe_dialog(e,t,a){var n={title:t,lock:!0,opacity:0,width:"95%"};n=a?$.extend(n,a):n,Wind.use("artDialog","iframeTools",function(){art.dialog.open(e,n)})}function open_map_dialog(e,t,a,n){var i={title:t,lock:!0,opacity:0,width:"95%",height:400,ok:function(){if(n){var e=this.iframe.contentWindow,t=$("#lng_input",e.document).val(),a=$("#lat_input",e.document).val(),i={};i.address=$("#address_input",e.document).val(),i.province=$("#province_input",e.document).val(),i.city=$("#city_input",e.document).val(),i.district=$("#district_input",e.document).val(),n.apply(this,[t,a,i])}}};i=a?$.extend(i,a):i,Wind.use("artDialog","iframeTools",function(){art.dialog.open(e,i)})}!function(){$.ajaxSetup({complete:function(e){},data:{},error:function(e,t,a){}}),$.browser.msie&&$.ajaxSetup({cache:!1}),""!==document.createElement("input").placeholder&&$("[placeholder]").focus(function(){var e=$(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=$(this);""!=e.val()&&e.val()!=e.attr("placeholder")||(e.addClass("placeholder"),e.val(e.attr("placeholder")))}).blur().parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.val("")})}),$("a.js-dialog").length&&Wind.use("artDialog","iframeTools",function(){$(".js-dialog").on("click",function(e){e.preventDefault();var t=$(this);art.dialog.open($(this).prop("href"),{close:function(){return t.focus(),!0},title:t.prop("title")})}).attr("role","button")});var e=$("form.js-ajax-form");if(e.length&&Wind.use("ajaxForm","artDialog",function(){$.browser.msie&&e.on("submit",function(e){e.preventDefault()}),$("button.js-ajax-submit").on("click",function(e){e.preventDefault();var t=$(this),a=t.parents("form.js-ajax-form");if(!t.data("loading")){if(t.data("subcheck")){if(t.parent().find("span").remove(),a.find("input.js-check:checked").length){var n=t.data("msg");n?art.dialog({id:"warning",icon:"warning",content:t.data("msg"),cancelVal:"关闭",cancel:function(){},ok:function(){t.data("subcheck",!1),t.click()}}):(t.data("subcheck",!1),t.click())}else $('<span class="tips_error">请至少选择一项</span>').appendTo(t.parent()).fadeIn("fast");return!1}$.browser.msie&&a.find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.val("")}),a.ajaxSubmit({url:t.data("action")?t.data("action"):a.attr("action"),dataType:"json",beforeSubmit:function(e,a,n){t.data("loading",!0);var i=t.text();t.text(i+"中...").prop("disabled",!0).addClass("disabled")},success:function(e,n,i,o){var r=t.text();if(t.removeClass("disabled").text(r.replace("中...","")).parent().find("span").remove(),"success"===e.state)$('<span class="tips_success">'+e.info+"</span>").appendTo(t.parent()).fadeIn("slow").delay(1e3).fadeOut(function(){});else if("fail"===e.state){var c=a.find(".verify_img");c.length&&c.attr("src",c.attr("src")+"&refresh="+Math.random());var l=a.find("[name='verify']");l.val(""),$('<span class="tips_error">'+e.info+"</span>").appendTo(t.parent()).fadeIn("fast"),t.removeProp("disabled").removeClass("disabled")}e.referer?window.parent.art?window.parent.location.href=e.referer:window.location.href=e.referer:"success"===e.state&&reloadPage(window.parent.art?window.parent:window)},complete:function(){t.data("loading",!1)}})}})}),$("#js-dialog_close").on("click",function(e){e.preventDefault();try{art.dialog.close()}catch(t){Wind.use("artDialog","iframeTools",function(){art.dialog.close()})}}),$("a.js-ajax-delete").length&&Wind.use("artDialog",function(){$(".js-ajax-delete").on("click",function(e){e.preventDefault();var t=this,a=$(t),n=a.prop("href");a.data("msg");art.dialog({title:!1,icon:"question",content:"确定要继续吗？",follow:t,close:function(){return t.focus(),!0},okVal:"确定",ok:function(){$.getJSON(n).done(function(e){"success"===e.state?e.referer?location.href=e.referer:reloadPage(window):"fail"===e.state&&art.dialog({content:e.info,icon:"warning",ok:function(){return this.title(e.info),!0}})})},cancelVal:"关闭",cancel:!0})})}),$("a.js-ajax-dialog-btn").length&&Wind.use("artDialog",function(){$(".js-ajax-dialog-btn").on("click",function(e){e.preventDefault();var t=this,a=$(t),n=a.prop("href"),i=a.data("msg");i||(i="您确定要进行此操作吗？"),art.dialog({title:!1,icon:"question",content:i,follow:t,close:function(){return t.focus(),!0},ok:function(){$.getJSON(n).done(function(e){"success"===e.state?e.referer?location.href=e.referer:reloadPage(window):"fail"===e.state&&art.dialog({content:e.info,icon:"warning",ok:function(){return this.title(e.info),!0}})})},cancelVal:"关闭",cancel:!0})})}),$(".js-check-wrap").length){var t=$("input.js-check-all");$.each(t,function(){var e,a=$(this),n=a.data("direction");e=$("input.js-check[data-"+n+'id="'+a.data("checklist")+'"]'),a.change(function(i){var o=a.parents(".js-check-wrap");if($(this).attr("checked"))e.attr("checked",!0),o.find("input.js-check").length===o.find("input.js-check:checked").length&&o.find(t).attr("checked",!0);else{e.removeAttr("checked"),o.find(t).removeAttr("checked");var r="x"===n?"y":"x";o.find($('input.js-check-all[data-direction="'+r+'"]')).removeAttr("checked")}}),e.change(function(){$(this).attr("checked")?e.filter(":checked").length===e.length&&a.attr("checked",!0):a.removeAttr("checked")})})}var a=$("input.js-date");a.length&&Wind.use("datePicker",function(){a.datePicker()});var n=$("input.js-datetime");n.length&&Wind.use("datePicker",function(){n.datePicker({time:!0})});var i=$("ul.js-tabs-nav");i.length&&Wind.use("tabs",function(){i.tabs(".js-tabs-content > div")})}();